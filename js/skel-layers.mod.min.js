/* skel-layers.js v1.0.3 | (c) n33 | getskel.com | MIT licensed 
	simple mod in nav case and for opservpage
*/
skel.registerPlugin("layers",function(b){function c(a,b,c){var e,f;this.id=a,this.index=c,this.config={breakpoints:null,states:null,position:null,side:null,animation:"none",orientation:"none",width:0,height:0,zIndex:this.index,html:"",hidden:!1,exclusive:!0,resetScroll:!0,resetForms:!0,swipeToHide:!0,clickToHide:!1},d._.extend(this.config,b),this.element=d._.newDiv(this.config.html),this.element.id=a,this.element._layer=this,this.$element=null,this.touchPosX=null,this.touchPosY=null,this.visible=!1,f=d._.newElement(this.id,this.element,"skel_layers_hiddenWrapper",1),f.onAttach=function(){var a=this.object._layer;a.isInitialized()||a.init(),a.resume()},f.onDetach=function(){var a=this.object._layer;a.suspend()},this.config.states&&this.config.states!=d._.sd?(d._.cacheElement(f),e=d._.getArray(this.config.states),d._.iterate(e,function(a){d._.addCachedElementToState(e[a],f)})):this.config.breakpoints?(d._.cacheElement(f),e=d._.getArray(this.config.breakpoints),d._.iterate(e,function(a){d._.addCachedElementToBreakpoint(e[a],f)})):d._.attachElement(f)}if("undefined"==typeof b)return!1;b.fn._skel_layers_demote=function(){if(this.length>1){for(var a=0;a<this.length;a++)b(this[a])._skel_layers_demote();return b(this)}var c=b(this);return c.css("z-index",c.data("skel-layers-layer-z-index")).data("skel-layers-layer-z-index",""),c},b.fn._skel_layers_expandCell=function(){var a=b(this),c=a.parent(),d=12;c.children().each(function(){var a=b(this),c=a.attr("class");c&&c.match(/(\s+|^)([0-9]+)u(\s+|$)/)&&(d-=parseInt(RegExp.$2))}),d>0&&(a._skel_layers_initializeCell(),a.css("width",(a.data("cell-size")+d)/12*100+"%"))},b.fn._skel_layers_hasParent=function(){return b(this).parents().length>0},b.fn._skel_layers_initializeCell=function(){var a=b(this);a.attr("class").match(/(\s+|^)([0-9]+)u(\s+|$)/)&&a.data("cell-size",parseInt(RegExp.$2))},b.fn._skel_layers_promote=function(a){if(this.length>1){for(var c=0;c<this.length;c++)b(this[c])._skel_layers_promote(a);return b(this)}var f,e=b(this);return isNaN(f=parseInt(e.data("skel-layers-layer-index")))&&(f=0),e.data("skel-layers-layer-z-index",e.css("z-index")).css("z-index",d.config.baseZIndex+f+(a?a:1)),e},b.fn._skel_layers_resetForms=function(){var a=b(this);return b(this).find("form").each(function(){this.reset()}),a},b.fn._skel_layers_xcss=function(a,c){return b(this).css(a,c).css("-moz-"+a,"-moz-"+c).css("-webkit-"+a,"-webkit-"+c).css("-o-"+a,"-o-"+c).css("-ms-"+a,"-ms-"+c)},b.fn._skel_layers_xcssProperty=function(a,c){return b(this).css(a,c).css("-moz-"+a,c).css("-webkit-"+a,c).css("-o-"+a,c).css("-ms-"+a,c)},b.fn._skel_layers_xcssValue=function(a,c){return b(this).css(a,c).css(a,"-moz-"+c).css(a,"-webkit-"+c).css(a,"-o-"+c).css(a,"-ms-"+c)},c.prototype.animations={none:{show:function(a){var b=a.config,c=a.$element;c.scrollTop(0)._skel_layers_promote(b.zIndex).show(),b.resetForms&&c._skel_layers_resetForms(),a.moveToVisibleWrapper()},hide:function(a){var c=(a.config,a.$element);c.hide()._skel_layers_demote(),a.moveToHiddenWrapper()}},overlayX:{show:function(a){var b=a.config,c=a.$element;c.scrollTop(0)._skel_layers_promote(b.zIndex).css(b.side,"-"+d.recalcW(d._.useActive(b.width))+"px").show(),b.resetForms&&c._skel_layers_resetForms(),d.lockView("x"),a.moveToVisibleWrapper(),window.setTimeout(function(){c._skel_layers_translate(("right"==b.side?"-":"")+d.recalcW(d._.useActive(b.width)),0)},50)},hide:function(a){var c=(a.config,a.$element);c.find("*").trigger("blur",[!0]),c._skel_layers_translateOrigin(),window.setTimeout(function(){d.unlockView("x"),a.moveToHiddenWrapper(),c._skel_layers_demote().hide()},d.config.speed+50)}},overlayY:{show:function(a){var b=a.config,c=a.$element;c.scrollTop(0)._skel_layers_promote(b.zIndex).css(b.side,"-"+d.recalcW(d._.useActive(b.height))+"px").show(),b.resetForms&&c._skel_layers_resetForms(),d.lockView("y"),a.moveToVisibleWrapper(),window.setTimeout(function(){c._skel_layers_translate(0,("bottom"==b.side?"-":"")+d.recalcW(d._.useActive(b.height)))},50)},hide:function(a){var c=(a.config,a.$element);c.find("*").trigger("blur",[!0]),c._skel_layers_translateOrigin(),window.setTimeout(function(){d.unlockView("y"),a.moveToHiddenWrapper(),c._skel_layers_demote().hide()},d.config.speed+50)}},pushX:{show:function(a){var b=a.config,c=a.$element,e=d.cache.wrapper.add(d.cache.visibleWrapper.children());c.scrollTop(0).css(b.side,"-"+d.recalcW(d._.useActive(b.width))+"px").show(),b.resetForms&&c._skel_layers_resetForms(),e._skel_layers_promote(),d.lockView("x"),a.moveToVisibleWrapper(),window.setTimeout(function(){c.add(e)._skel_layers_translate(("right"==b.side?"-":"")+d.recalcW(d._.useActive(b.width)),0)},50)},hide:function(a){var c=(a.config,a.$element),e=d.cache.wrapper.add(d.cache.visibleWrapper.children());c.find("*").trigger("blur",[!0]),c.add(e)._skel_layers_translateOrigin(),window.setTimeout(function(){d.unlockView("x"),c.hide(),a.moveToHiddenWrapper(),e._skel_layers_demote()},d.config.speed+50)}},pushY:{show:function(a){var b=a.config,c=a.$element,e=d.cache.wrapper.add(d.cache.visibleWrapper.children());c.scrollTop(0).css(b.side,"-"+d.recalcH(d._.useActive(b.height))+"px").show(),b.resetForms&&c._skel_layers_resetForms(),d.lockView("y"),a.moveToVisibleWrapper(),window.setTimeout(function(){c.add(e)._skel_layers_translate(0,("bottom"==b.side?"-":"")+d.recalcH(d._.useActive(b.height)))},50)},hide:function(a){var c=(a.config,a.$element),e=d.cache.wrapper.add(d.cache.visibleWrapper.children());c.find("*").trigger("blur",[!0]),c.add(e)._skel_layers_translateOrigin(),window.setTimeout(function(){d.unlockView("y"),c.hide(),a.moveToHiddenWrapper()},d.config.speed+50)}},revealX:{show:function(a){var b=a.config,c=a.$element,e=d.cache.wrapper.add(d.cache.visibleWrapper.children());c.scrollTop(0).show(),b.resetForms&&c._skel_layers_resetForms(),e._skel_layers_promote(),d.lockView("x"),a.moveToVisibleWrapper(),window.setTimeout(function(){e._skel_layers_translate(("right"==b.side?"-":"")+d.recalcW(d._.useActive(b.width)),0)},50)},hide:function(a){var c=(a.config,a.$element),e=d.cache.wrapper.add(d.cache.visibleWrapper.children());c.find("*").trigger("blur",[!0]),e._skel_layers_translateOrigin(),window.setTimeout(function(){d.unlockView("x"),c.hide(),e._skel_layers_demote(),a.moveToHiddenWrapper()},d.config.speed+50)}}},c.prototype.positions={"top-left":{v:"top",h:"left",side:"left"},"top-right":{v:"top",h:"right",side:"right"},top:{v:"top",h:"center",side:"top"},"top-center":{v:"top",h:"center",side:"top"},"bottom-left":{v:"bottom",h:"left",side:"left"},"bottom-right":{v:"bottom",h:"right",side:"right"},bottom:{v:"bottom",h:"center",side:"bottom"},"bottom-center":{v:"bottom",h:"center",side:"bottom"},left:{v:"center",h:"left",side:"left"},"center-left":{v:"center",h:"left",side:"left"},right:{v:"center",h:"right",side:"right"},"center-right":{v:"center",h:"right",side:"right"}},c.prototype.show=function(a){if(this.visible)return void d.cache.visibleWrapper.append(this.element);var g,b=this,c=this.config,e=d._.useActive(c.animation),f=this.$element;switch(f.css("width",d._.useActive(c.width)).css("height",d._.useActive(c.height)),"ios"==d._.vars.deviceType&&("100%"!=c.height||c.hidden||f.css("height","-webkit-calc("+d._.useActive(c.height)+" + 70px)"),f.on("blur","input,select,textarea",function(a,c){c||window.setTimeout(function(){d.cache.hiddenWrapper.append(b.element),window.setTimeout(function(){d.cache.visibleWrapper.append(b.element)},500)},500)})),g=this.positions[c.position],f.addClass("skel-layer-"+c.position).data("skel-layers-layer-position",c.position),g.v){case"top":f.css("top",0);break;case"bottom":f.css("bottom",0);break;case"center":f.css("top","50%").css("margin-top","-"+d.getHalf(c.height))}switch(g.h){case"left":f.css("left",0);break;case"right":f.css("right",0);break;case"center":f.css("left","50%").css("margin-left","-"+d.getHalf(c.width))}this.animations[e].show(this),c.hidden&&c.exclusive&&(d.cache.body.addClass("skel-layers-exclusiveVisible"),d.cache.exclusiveLayer=this),this.visible=!0},c.prototype.hide=function(a){if(!this.visible)return void d.cache.hiddenWrapper.append(this.element);var b=this.config,c=d._.useActive(b.animation);c in this.animations||(c="none"),this.animations[c].hide(this),b.hidden&&b.exclusive&&d.cache.exclusiveLayer===this&&(d.cache.body.removeClass("skel-layers-exclusiveVisible"),d.cache.exclusiveLayer=null),this.visible=!1},c.prototype.init=function(){var a=this.config,c=b(this.element),e=this;switch(c._skel_layers_init(),c.find("*").each(function(){d.parseInit(b(this))}),c.addClass("skel-layer").data("skel-layers-layer-index",this.index).css("z-index",d.config.baseZIndex).css("position","fixed").css("-ms-overflow-style","-ms-autohiding-scrollbar").css("-webkit-overflow-scrolling","touch").hide(),a.orientation){case"vertical":c.css("overflow-y","auto");break;case"horizontal":c.css("overflow-x","auto");break;case"none":}a.position&&a.position in this.positions||(a.position="top-left"),a.side||(a.side=this.positions[a.position].side),a.animation&&("object"==typeof a.animation||a.animation in this.animations)||(a.animation="none"),a.clickToHide&&c.find("a").css("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("click.skel-layers",function(a){var c=b(this);if(!c.hasClass("skel-layers-ignore")&&(a.preventDefault(),a.stopPropagation(),e.hide(),!c.hasClass("skel-layers-ignoreHref"))){var f=c.attr("href"),g=c.attr("target");"undefined"!=typeof f&&""!=f&&window.setTimeout(function(){"_blank"==g&&"wp"!=d._.vars.deviceType?window.open(f):window.location.href=f},d.config.speed+10)}}),c.on("touchstart",function(a){e.touchPosX=a.originalEvent.touches[0].pageX,e.touchPosY=a.originalEvent.touches[0].pageY}).on("touchmove",function(b){if(null!==e.touchPosX&&null!==e.touchPosY){var d=e.touchPosX-b.originalEvent.touches[0].pageX,f=e.touchPosY-b.originalEvent.touches[0].pageY,g=c.outerHeight(),h=c.get(0).scrollHeight-c.scrollTop();if(a.hidden&&a.swipeToHide){var i=!1,j=20,k=50;switch(a.side){case"left":i=f<j&&f>-1*j&&d>k;break;case"right":i=f<j&&f>-1*j&&d<-1*k;break;case"top":i=d<j&&d>-1*j&&f>k;break;case"bottom":i=d<j&&d>-1*j&&f<-1*k}if(i)return e.touchPosX=null,e.touchPosY=null,e.hide(),!1}return!(0==c.scrollTop()&&f<0||h>g-2&&h<g+2&&f>0)&&void 0}}),this.$element=c},c.prototype.isInitialized=function(){return null!==this.$element},c.prototype.isVisible=function(){return this.$element.is(":visible")},c.prototype.moveToVisibleWrapper=function(){d.cache.visibleWrapper.append(this.$element)},c.prototype.moveToHiddenWrapper=function(){this.$element._skel_layers_hasParent()&&d.cache.hiddenWrapper.append(this.$element)},c.prototype.resume=function(a){this.isInitialized()&&(this.$element.find("*").each(function(){d.parseResume(b(this))}),this.config.hidden||this.show(a))},c.prototype.suspend=function(){this.isInitialized()&&(this.$element._skel_layers_translateOrigin(),this.$element.find("*").each(function(){d.parseSuspend(b(this))}),this.visible&&this.hide())};var d={cache:{visibleWrapper:null,body:null,exclusiveLayer:null,html:null,htmlbody:null,hiddenWrapper:null,layers:{},window:null,wrapper:null},config:{baseZIndex:1e4,layers:{},speed:250,transform:!0,transformBreakpoints:null,transformTest:null},eventType:"click touchend",show:function(a){d._.DOMReady(function(){d.cache.layers[a].show()})},hide:function(a){d._.DOMReady(function(){d.cache.layers[a].hide()})},toggle:function(a){d._.DOMReady(function(){var b=d.cache.layers[a];b.isVisible()?b.hide():b.show()})},getBaseFontSize:function(){return d._.vars.IEVersion<9?16.5:parseFloat(getComputedStyle(d.cache.body.get(0)).fontSize)},getHalf:function(a){var b=parseInt(a);return"string"==typeof a&&"%"==a.charAt(a.length-1)?Math.floor(b/2)+"%":Math.floor(b/2)+"px"},lockView:function(a){d.cache.window._skel_layers_scrollPos=d.cache.window.scrollTop(),"x"==a&&d.cache.htmlbody.css("overflow-x","hidden"),d.cache.wrapper.on("touchstart.lock click.lock scroll.lock",function(a){a.preventDefault(),a.stopPropagation(),d.cache.exclusiveLayer&&d.cache.exclusiveLayer.hide()}),d.cache.window.on("orientationchange.lock",function(a){d.cache.exclusiveLayer&&d.cache.exclusiveLayer.hide()}),d._.vars.isMobile||window.setTimeout(function(){d.cache.window.on("resize.lock scroll.lock",function(a){d.cache.exclusiveLayer&&d.cache.exclusiveLayer.hide()})},d.config.speed+50)},parseInit:function(a){var c,e,i,j,f=a.get(0),g=a.attr("data-action"),h=a.attr("data-args");switch(g&&h&&(h=h.split(",")),g){case"toggleLayer":case"layerToggle":a.css("-webkit-tap-highlight-color","rgba(0,0,0,0)").css("cursor","pointer"),c=function(a){if(a.preventDefault(),a.stopPropagation(),d.cache.exclusiveLayer)return d.cache.exclusiveLayer.hide(),!1;var e=(b(this),d.cache.layers[h[0]]);e.isVisible()?e.hide():e.show()},a.on(d.eventType,c);break;case"navList":i=b("#"+h[0]),c=i.find("a"),e=[];var k=0,l="/",m='<img id="opservlogonarrow" src="/favicon/favicon-196x196.png">',n=m+"OpServ";e.push('<a class="link depth-'+k+'"'+("undefined"!=typeof l&&""!=l?' href="'+l+'"':"")+'><span class="indent-'+k+'"></span>'+n+"</a>"),c.each(function(){var c,d,a=b(this);c=Math.max(0,a.parents("li").length-1),d=a.attr("href"),e.push('<a class="link depth-'+c+'"'+("undefined"!=typeof d&&""!=d?' href="'+d+'"':"")+'><span class="indent-'+c+'"></span>'+a[0].innerHTML+"</a>")}),e.length>0&&a.html("<nav>"+e.join("")+"</nav>");break;case"copyText":i=b("#"+h[0]),a.html(i.text());break;case"copyHTML":i=b("#"+h[0]),a.html(i.html());break;case"moveElementContents":i=b("#"+h[0]),f._skel_layers_resume=function(){i.children().each(function(){var c=b(this);a.append(c),c.addClass("skel-layers-moved")})},f._skel_layers_suspend=function(){a.children().each(function(){var a=b(this);i.append(a),a.removeClass("skel-layers-moved"),d.refresh(a)})},f._skel_layers_resume();break;case"moveElement":i=b("#"+h[0]),f._skel_layers_resume=function(){b('<div id="skel-layers-placeholder-'+i.attr("id")+'" />').insertBefore(i),a.append(i),i.addClass("skel-layers-moved")},f._skel_layers_suspend=function(){b("#skel-layers-placeholder-"+i.attr("id")).replaceWith(i),i.removeClass("skel-layers-moved"),d.refresh(i)},f._skel_layers_resume();break;case"moveCell":i=b("#"+h[0]),j=b("#"+h[1]),f._skel_layers_resume=function(){b('<div id="skel-layers-placeholder-'+i.attr("id")+'" />').insertBefore(i),a.append(i),i.css("width","auto"),j&&j._skel_layers_expandCell()},f._skel_layers_suspend=function(){b("#skel-layers-placeholder-"+i.attr("id")).replaceWith(i),i.css("width",""),j&&j.css("width","")},f._skel_layers_resume()}},parseResume:function(a){var b=a.get(0);b._skel_layers_resume&&b._skel_layers_resume()},parseSuspend:function(a){var b=a.get(0);b._skel_layers_suspend&&b._skel_layers_suspend()},recalc:function(a,b){var e,c=d._.parseMeasurement(a);switch(c[1]){case"%":e=Math.floor(b*(c[0]/100));break;case"em":e=d.getBaseFontSize()*c[0];break;default:case"px":e=c[0]}return e},recalcH:function(a){return d.recalc(a,b(window).height())},recalcW:function(a){return d.recalc(a,b(window).width())},refresh:function(a){var c;d.config.transform&&(c=a?a.filter(".skel-layers-fixed:not(.skel-layers-moved)"):b(".skel-layers-fixed:not(.skel-layers-moved)"),c._skel_layers_init().appendTo(d.cache.visibleWrapper))},unlockView:function(a){"x"==a&&d.cache.htmlbody.css("overflow-x","visible"),d.cache.wrapper.off("touchstart.lock click.lock scroll.lock"),d.cache.window.off("orientationchange.lock"),d._.vars.isMobile||d.cache.window.off("resize.lock scroll.lock")},init:function(){"config"in d.config&&(d._.extend(d.config,d.config.config),delete d.config.config),d._.iterate(d.config,function(a){d.config[a]&&"object"==typeof d.config[a]&&"position"in d.config[a]&&(d.config.layers[a]=d.config[a],delete d.config[a])}),d.config.transformTest&&(d.config.transform=d.config.transformTest()),d.config.transform&&(("android"==d._.vars.deviceType&&d._.vars.deviceVersion<4||"wp"==d._.vars.deviceType)&&(d.config.transform=!1),d._.vars.IEVersion<10&&(d.config.transform=!1),d.config.transformBreakpoints&&!d._.hasActive(d._.getArray(d.config.transformBreakpoints))&&(d.config.transform=!1)),d.initObjects(),d.initTransforms(),d._.DOMReady(function(){d.initLayers(),d.initIncludes(),d._.updateState(),d.refresh()})},initIncludes:function(){b(".skel-layers-include").each(function(){d.parseInit(b(this))})},initLayers:function(){var f,g=1;d._.iterate(d.config.layers,function(a){var e;"position"in d.config.layers[a]&&(d.config.layers[a].html||0!=(e=b("#"+a)).length)&&(f=new c(a,d.config.layers[a],g++),d.cache.layers[a]=f,e&&(e.children().appendTo(f.element),e.remove()))})},initObjects:function(){d.cache.window=b(window),d._.DOMReady(function(){d.cache.html=b("html"),d.cache.body=b("body"),d.cache.htmlbody=b("html,body"),d.cache.body.wrapInner('<div id="skel-layers-wrapper" />'),d.cache.wrapper=b("#skel-layers-wrapper"),d.cache.wrapper.css("position","relative").css("left","0").css("right","0").css("top","0")._skel_layers_init(),d.cache.hiddenWrapper=b('<div id="skel-layers-hiddenWrapper" />').appendTo(d.cache.body),d.cache.hiddenWrapper.css("height","100%"),d.cache.visibleWrapper=b('<div id="skel-layers-visibleWrapper" />').appendTo(d.cache.body),d.cache.visibleWrapper.css("position","relative"),d._.registerLocation("skel_layers_hiddenWrapper",d.cache.hiddenWrapper[0]),d._.registerLocation("skel_layers_visibleWrapper",d.cache.visibleWrapper[0]),d._.registerLocation("skel_layers_wrapper",d.cache.wrapper[0]),b("[autofocus]").focus()})},initTransforms:function(){if(d.config.transform)b.fn._skel_layers_translateOrigin=function(){return b(this)._skel_layers_translate(0,0)},b.fn._skel_layers_translate=function(a,c){return b(this).css("transform","translate("+a+"px, "+c+"px)")},b.fn._skel_layers_init=function(){return b(this).css("backface-visibility","hidden").css("perspective","500")._skel_layers_xcss("transition","transform "+d.config.speed/1e3+"s ease-in-out")};else{var f=[];d.cache.window.resize(function(){if(0!=d.config.speed){var a=d.config.speed;d.config.speed=0,window.setTimeout(function(){d.config.speed=a,f=[]},a)}}),b.fn._skel_layers_translateOrigin=function(){for(var a=0;a<this.length;a++){var c=this[a],e=b(c);f[c.id]&&e.animate(f[c.id],d.config.speed,"swing",function(){d._.iterate(f[c.id],function(a){e.css(a,f[c.id][a])}),d.cache.body.css("overflow-x","visible"),d.cache.wrapper.css("width","auto").css("padding-bottom",0)})}return b(this)},b.fn._skel_layers_translate=function(e,g){var h,j,k;for(e=parseInt(e),g=parseInt(g),0!=e?(d.cache.body.css("overflow-x","hidden"),d.cache.wrapper.css("width",d.cache.window.width())):j=function(){d.cache.body.css("overflow-x","visible"),d.cache.wrapper.css("width","auto")},g<0?d.cache.wrapper.css("padding-bottom",Math.abs(g)):k=function(){d.cache.wrapper.css("padding-bottom",0)},h=0;h<this.length;h++){var n,l=this[h],m=b(l);if(!f[l.id])if(n=c.prototype.positions[m.data("skel-layers-layer-position")]){switch(f[l.id]={},n.v){case"center":case"top":f[l.id].top=parseInt(m.css("top"));break;case"bottom":f[l.id].bottom=parseInt(m.css("bottom"))}switch(n.h){case"center":case"left":f[l.id].left=parseInt(m.css("left"));break;case"right":f[l.id].right=parseInt(m.css("right"))}}else n=m.position(),f[l.id]={top:n.top,left:n.left};a={},d._.iterate(f[l.id],function(b){var c;switch(b){case"top":c=d.recalcH(f[l.id][b])+g;break;case"bottom":c=d.recalcH(f[l.id][b])-g;break;case"left":c=d.recalcW(f[l.id][b])+e;break;case"right":c=d.recalcW(f[l.id][b])-e}a[b]=c}),m.animate(a,d.config.speed,"swing",function(){j&&j(),k&&k()})}return b(this)},b.fn._skel_layers_init=function(){return b(this).css("position","absolute")}}}};return d}(jQuery));